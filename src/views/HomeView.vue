<script>
  /**
   * ğŸ  HomeView.vue - ä¸»é é¢çµ„ä»¶ (Main Page Component)
   *
   * é€™æ˜¯æ‡‰ç”¨ç¨‹å¼çš„ä¸»é é¢ï¼Œæ•´åˆäº†åœ°åœ–é¡¯ç¤ºå’Œæ§åˆ¶é¢æ¿ã€‚
   * ä¸»è¦åŠŸèƒ½ï¼š
   * - é¡¯ç¤ºç«ç½åœ°é»åœ°åœ–
   * - æä¾›çµ±è¨ˆè³‡è¨Šé¢æ¿
   * - éŸ¿æ‡‰å¼ä½ˆå±€è¨­è¨ˆ
   *
   * çµ„ä»¶çµæ§‹ï¼š
   * - MapTab: åœ°åœ–é¡¯ç¤ºçµ„ä»¶
   * - çµ±è¨ˆé¢æ¿: ç«ç½åœ°é»çµ±è¨ˆè³‡è¨Š
   */

  import MapTab from '../tabs/MapTab.vue';
  import { useDataStore } from '@/stores/dataStore.js';
  import { useDefineStore } from '@/stores/defineStore.js';
  import { onMounted } from 'vue';

  export default {
    name: 'HomeView',
    components: { MapTab },
    setup() {
      // ğŸ“¦ å­˜å„²å¯¦ä¾‹
      const dataStore = useDataStore();
      const defineStore = useDefineStore();

      /**
       * ğŸ—ºï¸ è¨­å®šåœ°åœ–å¯¦ä¾‹
       * å°‡ Leaflet åœ°åœ–å¯¦ä¾‹å‚³éçµ¦ dataStore
       * @param {Object} map - Leaflet åœ°åœ–å¯¦ä¾‹
       */
      const setMapInstance = (map) => dataStore.setMapInstance(map);

      // ğŸš€ åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
      onMounted(() => {
        // ç«ç½åœ°é»æ•¸æ“šå°‡åœ¨åœ°åœ–æº–å‚™å¥½å¾Œè‡ªå‹•è¼‰å…¥
        console.log('ğŸ  HomeView åˆå§‹åŒ–å®Œæˆ');
      });

      return {
        setMapInstance,
        defineStore,
        dataStore,
      };
    },
  };
</script>

<template>
  <!-- ğŸ  ä¸»æ‡‰ç”¨ç¨‹å¼å®¹å™¨ -->
  <div id="app" class="d-flex flex-column vh-100">
    <!-- ğŸ—ºï¸ åœ°åœ–å€åŸŸå®¹å™¨ -->
    <div class="flex-grow-1 overflow-hidden position-relative">
      <!-- ğŸ—ºï¸ åœ°åœ–çµ„ä»¶ -->
      <MapTab @map-ready="setMapInstance" />
    </div>
  </div>
</template>

<style>
  @import '../assets/css/common.css';
</style>
